import React, { useEffect, useState } from 'react'
import WallCell from './WallCell';
import PathCell from './PathCell';
import StartCell from './StartCell';
import GoalCell from './GoalCell';

/*
const grid = [
    [
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        "#",
        "S",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        "G",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        "#",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        "#",
        "#",
        ".",
        "#",
        ".",
        "#",
        "#",
        "#",
        ".",
        "#"
    ],
    [
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#",
        ".",
        ".",
        ".",
        ".",
        ".",
        "#"
    ],
    [
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#",
        "#"
    ]
];
*/

function MazeGrid() {

    const [grid, setGrid] = useState([]);

    useEffect(() => {
        const fetchMaze = async () => {
        try {
            const response = await fetch('http://localhost:8080/generate?n=20');
            const data = await response.json();
            setGrid(data);
        } catch (error) {
            console.error("Failed to fetch maze:", error);
        }
        };

        fetchMaze();
    }, []); 

    if (grid.length === 0) {
        return <div>Loading...</div>;
    }

  return (
    
        <div style={{ 
            display: 'grid', 
            gridTemplateColumns: `repeat(${grid[0].length}, 1fr)`}}>
            {
                grid.map((rowArr, rowIndex) => (
                <React.Fragment key={rowIndex}>
                    {rowArr.map((cellValue, colIndex) => {
                        const key = `${rowIndex}-${colIndex}`;
                        
                        switch(cellValue){
                            case '#':
                                return <WallCell key={key} />;
                            case 'S':
                                return <StartCell key={key}/>
                            case 'G':
                                return <GoalCell key={key}/>
                            default:
                                return <PathCell key={key}/>
                        }
                    })}
                </React.Fragment>
            ))}
        </div>
    
  )
}

export default MazeGrid